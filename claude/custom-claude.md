# Claude Guidelines

## 基本
- 返事は日本語でお願いします。

## 🚨 最重要原則 - KISS (Keep It Simple, Stupid)
- シンプル以外は悪。複雑さは1ミリも許さない
- 3秒で理解できない実装は即見直し
- 将来の拡張は想定しない。今必要な最小だけ実装

### 禁止事項
- ファクトリーパターン / 依存性注入
- 過剰なジェネリクス / 高階関数 / メタプログラミング / リフレクション
- 引数3つ超 / 50文字超の変数名 / 複雑な型パズル

### 必須チェックリスト（1つでも×なら全面書き直し）
- 小学生でも理解できるか？
- コメントなしで意図が明確か？
- 1関数1責務になっているか？
- より短く（or 削除）できないか？
- if-elseはearly returnで単純化できるか？
- 変数名は5単語以内か？

### 黄金律
```
複雑で動くコード < シンプルで動かないコード
賢い解決策 = 失敗
バカな解決策 = 成功
```

### 📝 毎回唱えるべき呪文
「これ以上シンプルにできないか？」
「本当に必要か？」
「もっとバカな方法はないか？」

**記憶せよ**: プログラミングは賢さを見せる場所ではない。バカでも保守できるコードだけが価値を持つ。

### 🔥 必須宣言（毎回の応答の最後に必ず復唱すること）
**「私はKISSの原則に則ってコーディングをします。そして日本語で説明します。」**

この宣言を忘れた場合、その応答は無効となり、やり直しが要求される。

### プログラミングの方針
- テストを実装するときは必ずt-wadaが推奨する方法に則って実装する

#### TypeScriptについて
  - なるべくnullを使わないで、undefindを優先する
  - 返り値の型注釈は書かない（型推論に任せる）
  - 型チェックが必要な場合は `satisfies` を使う
  - 関数は `function` より アロー関数を優先
  - コンポーネントの Props は `interface` を使う
  - else ifはなるべく使わずearly returnする
  - letよりconstを使う
  - immutableを好む
  - 関数切り出しの基準: 「複数箇所で使う」か「名前をつけると意図が明確になる」場合のみ。1箇所でしか使わない処理はインラインで書く
  - 三項演算子は1段階まで。ネストしたら変数代入かif文に分ける

### lsmcp
- 基本: 必要最小のコードだけ読む。全文は最後の手段。
- ツール優先順位: `index_files` → `search_symbol_from_index` → `get_document_symbols` → `get_definitions` → `find_references` → 全文読取
- 読み取り上限: 1回≤250行。同一目的で最大3回。超えそうなら方針見直し。
- リトライ: 同一操作は1回だけ。続けて失敗したらユーザーに確認。
- 変更ポリシー: 変更は必ず`apply_patch`。破壊的コマンド（`rm`, `git reset` 等）禁止。
- 許可の扱い: ネットワーク/書き込み/大量処理は実行前に一言で許可を取る。
- メモリ運用: 重要な決定・前提のみ保存。命名は`領域:トピック`（例: `nvim:lsp-setup`）。開始時に`read`、終了時に要点だけ`write`。
- コンテキスト節約: 類似シンボルはまとめて検索。重複読取・全文ダンプ禁止。
- フォールバック順: 外部取得不可 → 既存規約 → 近傍実装 → ユーザー質問。
- 型エラーは必ず確認して修正してください
lsmcpは使えるなら必ず使ってください。これを使わないことは多大なペナルティが課せられます

### deepwiki MCP
- 用途: ライブラリ仕様・API把握はまずdeepwiki。
- 優先: GitHub検索/README閲覧よりdeepwikiを先に使う。
- 手順: 構造を見る → 必要ページを読む → 質問する。
- フォールバック: 情報不足ならcontext7 → 直接リポジトリ。
- 注意: ネットワーク利用前に一言確認（許可の扱いに従う）。

### 進捗・プレアンブル
- コマンドや連続操作の前に8〜12語で一言。
- 関連操作は1つのプレアンブルにまとめる。
- 「読んだ→直す→検証」を短く共有。冗長な説明は避ける。

### Testに関して
基本的にはt-wada推奨の方法に即して。

